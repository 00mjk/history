<!DOCTYPE html>
<html>
  <head>
    <script src="/bundle.js"></script>
    <script>
      var createHistory = History.createHistory;
      var enableBeforeUnload = History.enableBeforeUnload;

      var page = 0;
      var myHistory = enableBeforeUnload(createHistory)();

      myHistory.registerBeforeUnloadHook(function () {
        return "Wait, don't leave yet!";
      });

      myHistory.registerTransitionHook(function () {
        return 'Are you sure?';
      });

      myHistory.listen(function (location) {
        console.log(location);
      });
    </script>
  </head>
  <body>
    <p>Use the two buttons below to test normal transitions.</p>
    <p>
      <button onclick="page++; myHistory.pushState({ page: page }, '/' + page)">history.pushState</button>
      <button onclick="myHistory.goBack()">history.goBack</button>
    </p>
    <p>Close the tab to test <code>beforeunload</code> behavior.</p>
  </body>
</html>
